{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Demand Response Schema",
  "description": "Schema for hourly demand data (actual + forecast) per AGENT_TECH_SPEC.md ยง3.1",
  "type": "object",
  "required": ["area", "date", "timezone", "timescale", "series", "source"],
  "properties": {
    "area": {
      "type": "string",
      "enum": ["tokyo", "kansai"],
      "description": "Geographic area identifier"
    },
    "date": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "description": "Date in YYYY-MM-DD format"
    },
    "timezone": {
      "type": "string",
      "const": "Asia/Tokyo",
      "description": "Timezone (always Asia/Tokyo for Japan)"
    },
    "timescale": {
      "type": "string",
      "const": "hourly",
      "description": "Data granularity"
    },
    "series": {
      "type": "array",
      "minItems": 1,
      "maxItems": 24,
      "items": {
        "type": "object",
        "required": ["ts", "demand_mw"],
        "properties": {
          "ts": {
            "type": "string",
            "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\+09:00$",
            "description": "ISO8601 timestamp with +09:00 offset"
          },
          "demand_mw": {
            "type": "number",
            "minimum": 0,
            "description": "Actual demand in megawatts"
          },
          "forecast_mw": {
            "type": ["number", "null"],
            "minimum": 0,
            "description": "Forecasted demand in megawatts (optional)"
          }
        }
      }
    },
    "source": {
      "type": "object",
      "required": ["name", "url"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Data source name (e.g., TEPCO, Kansai)"
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "URL to original data source"
        }
      }
    },
    "meta": {
      "type": "object",
      "properties": {
        "warning": {
          "type": "string",
          "description": "Optional warning message for partial/missing data"
        }
      }
    }
  }
}
